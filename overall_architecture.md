# 全体システム構成

## 構成図

```text
+--------------+
|              |
|  Web camera  |
|              |
+-------+------+
        |
        |
+-------+------+                       +---------------+
|              |     BLE broadcast     |  Head-mount   |
| Raspberry Pi +---------------------->+  display      |
|              |                       |  (Oculus Go)  |
+--------------+                       +---------------+
        |
        |
+-------+-------+
|               |
| Accelerometer |
|               |
+---------------+
```

## 各コンポーネント

### 車内にあるコンポーネント

* Web camera
  * Raspberry Piからの`fswebcom`コマンド命令で画像を撮影
  * Raspbeery PiのUSBに接続
* 加速度センサー (Accelerometer)
  * 現在の3軸加速度を計測
  * Raspberry PiのGPIOに接続
* Raspberry Pi
  * 空間認識 + 人数認識 + 混雑度算出
    * 画面内を占める頭の割合から混雑度を算出してもいい
    * 加速度センサーを取り付け、
  * 混雑度をOculus GoにBLEでブロードキャスト送信
    * 一定間隔で送信
    * もしくは、加速度センサーを取り付けて車両が停止したタイミングでブロードキャスト送信

### ホームにあるコンポーネント

* Oculus Go
  * Oculus Goのカメラで車両を認識
  * BLEブロードキャストで受け取った混雑度に応じて車両に色を付ける
